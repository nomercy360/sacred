---
import type { Wish } from '../types/wish';

interface Props {
  wish: Wish;
}

const { wish } = Astro.props;

const primaryImage = wish.images.sort((a, b) => a.position - b.position)[0];
const imageUrl = primaryImage ? `https://assets.peatch.io/cdn-cgi/image/width=400/${primaryImage.url}` : null;
---

<a href={`/wish/${wish.id}`} class="block overflow-hidden">
  {imageUrl ? (
    <img 
      src={imageUrl} 
      alt={wish.name}
      class="w-full object-cover"
      loading="lazy"
    />
  ) : (
    <div class="aspect-[2/3] bg-gray-200 flex items-center justify-center">
      <span class="text-gray-400">No image</span>
    </div>
  )}
</a>